<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy 18th Birthday Harry</title>
  <style>
    :root{
      /* Blue headline palette */
      --brand: #1f4fd8;
      --brand-soft: rgba(31, 79, 216, 0.86);
      --brand-faint: rgba(31, 79, 216, 0.10);
      --brand-line: rgba(31, 79, 216, 0.16);

      /* neutral background */
      --bg1: #ffffff;
      --bg2: #fbfbfd;
      --ink: #1b1b1b;
      --shadow: rgba(0,0,0,0.16);
    }

    *{ box-sizing:border-box; }
    html, body { height:100%; margin:0; }
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      overflow: hidden;
      color: var(--ink);

      background:
        radial-gradient(1200px 700px at 25% 18%, rgba(255,255,255,0.95), rgba(255,255,255,0) 58%),
        radial-gradient(900px 600px at 80% 22%, rgba(31,79,216,0.06), rgba(255,255,255,0) 62%),
        linear-gradient(140deg, var(--bg1), var(--bg2) 55%, var(--bg1));
    }

    /* Confetti canvas */
    #confetti{
      position: fixed;
      inset: 0;
      width:100%;
      height:100%;
      pointer-events:none;
      z-index:1;
    }

    /* Balloons layer */
    #balloonLayer{
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 2; /* above confetti, below card (card is z=3 via wrap) */
      overflow: hidden;
    }

    .balloon{
      position: absolute;
      bottom: -160px;
      width: 92px;
      height: 125px;
      filter: drop-shadow(0 14px 20px rgba(0,0,0,0.12));
      will-change: transform;
      animation: balloonRise var(--dur, 7.5s) linear forwards;
    }

    /* NOTE: no opacity fade at top */
    @keyframes balloonRise{
      0%   { transform: translate3d(0, 0, 0) rotate(var(--r0, -3deg)); }
      50%  { transform: translate3d(calc(var(--drift, 0px) * 0.6), -55vh, 0) rotate(var(--r1, 4deg)); }
      100% { transform: translate3d(var(--drift, 0px), -130vh, 0) rotate(var(--r2, -2deg)); }
    }

    /* Decorative glow */
    .glow{
      position: fixed;
      width: 900px;
      height: 900px;
      border-radius: 50%;
      background: radial-gradient(circle, var(--brand-faint), rgba(255,255,255,0) 62%);
      filter: blur(2px);
      z-index: 0;
      animation: drift 14s ease-in-out infinite alternate;
      left: -260px;
      top: -280px;
      opacity: 0.8;
    }
    .glow2{
      left:auto; top:auto;
      right:-280px; bottom:-320px;
      animation-duration: 17s;
      animation-direction: alternate-reverse;
      opacity: 0.7;
    }
    @keyframes drift{
      to{ transform: translate(80px, 60px) scale(1.05); }
    }

    .wrap{
      position: relative;
      z-index:3;
      height:100%;
      display:grid;
      place-items:center;
      padding: 6vh 6vw;
      text-align:center;
    }

    .card{
      width: min(1100px, 92vw);
      background: rgba(255,255,255,0.74);
      border: 1px solid var(--brand-line);
      box-shadow: 0 20px 60px var(--shadow);
      border-radius: 36px;
      padding: clamp(22px, 5.5vh, 52px) clamp(20px, 5vw, 64px);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
    }
    .card::before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(600px 300px at 18% 0%, rgba(31,79,216,0.06), rgba(255,255,255,0) 70%),
        radial-gradient(500px 260px at 82% 18%, rgba(31,79,216,0.05), rgba(255,255,255,0) 70%);
      pointer-events:none;
      z-index:0;
    }

    .content{
      position: relative;
      z-index:1;
      display:grid;
      gap: clamp(12px, 2.2vh, 18px);
      justify-items:center;
      align-items:center;
    }

    /* Entrance animations */
    .pop{ animation: popIn 900ms cubic-bezier(.2,1.1,.2,1) both; }
    .pop.delay1{ animation-delay: 150ms; }
    .pop.delay2{ animation-delay: 320ms; }
    .pop.delay3{ animation-delay: 520ms; }
    .pop.delay4{ animation-delay: 720ms; }
    @keyframes popIn{
      from{ transform: translateY(18px) scale(0.985); opacity:0; }
      to{ transform: translateY(0) scale(1); opacity:1; }
    }

    h1{
      margin:0;
      font-size: clamp(46px, 6.8vw, 86px);
      line-height: 1.05;
      letter-spacing: -0.02em;
      color: var(--brand-soft);
      text-shadow: 0 8px 22px rgba(31,79,216,0.10);
    }

    .sub{
      margin:0;
      font-size: clamp(22px, 2.8vw, 34px);
      color: rgba(27,27,27,0.86);
    }
    .sub strong{
      color: rgba(31,79,216,0.82);
      font-weight: 800;
    }

    .congrats{
      margin:0;
      font-size: clamp(20px, 2.6vw, 32px);
      color: rgba(27,27,27,0.86);
    }

    .small{
      margin:0;
      font-size: clamp(16px, 1.8vw, 22px);
      color: rgba(27,27,27,0.62);
      letter-spacing: 0.04em;
      text-transform: uppercase;
      animation: shimmer 2.6s ease-in-out infinite;
    }
    @keyframes shimmer{
      0%,100%{ opacity:0.65; transform: translateY(0); }
      50%{ opacity:0.92; transform: translateY(-2px); }
    }

    .cakeWrap{
      margin-top: clamp(6px, 1.8vh, 12px);
      width: min(520px, 70vw);
      filter: drop-shadow(0 18px 30px rgba(0,0,0,0.11));
      animation: floaty 4.8s ease-in-out infinite;
    }
    @keyframes floaty{
      0%,100%{ transform: translateY(0); }
      50%{ transform: translateY(-8px); }
    }

    /* Flame flicker — inner group only */
    .flameShape{
      transform-box: fill-box;
      transform-origin: 50% 100%;
      filter: drop-shadow(0 0 14px rgba(255, 183, 3, 0.35));
      animation: flicker 0.14s infinite alternate;
    }
    .flameShape.f2{ animation-duration: 0.12s; }
    .flameShape.f3{ animation-duration: 0.16s; }

    @keyframes flicker{
      from{ transform: translate(var(--tx,0px), 0px) rotate(-2deg) scale(0.98); opacity:0.93; }
      to  { transform: translate(var(--tx,0px), -2px) rotate( 2deg) scale(1.03); opacity:1; }
    }

    @media (prefers-reduced-motion: reduce){
      * { animation: none !important; transition: none !important; }
      #confetti, #balloonLayer { display:none; }
    }
  </style>
</head>
<body>
  <canvas id="confetti" aria-hidden="true"></canvas>
  <div id="balloonLayer" aria-hidden="true"></div>

  <div class="glow"></div>
  <div class="glow glow2"></div>

  <div class="wrap">
    <div class="card">
      <div class="content">
        <h1 class="pop">Happy 18th Birthday Harry</h1>
        <p class="sub pop delay1"><strong>(For Saturday)</strong></p>
        <p class="congrats pop delay2">And congratulations for completing your HSC</p>
        <p class="small pop delay3">Let the party begin</p>

        <!-- Cake with gentle colour variation + fixed flames -->
        <svg class="cakeWrap pop delay4" viewBox="0 0 800 520" role="img" aria-label="Birthday cake with candles">
          <defs>
            <linearGradient id="cakeTop" x1="0" x2="0" y1="0" y2="1">
              <stop offset="0" stop-color="#ffffff"/>
              <stop offset="1" stop-color="#f2f4ff"/>
            </linearGradient>

            <linearGradient id="cakeSide" x1="0" x2="1" y1="0" y2="0">
              <stop offset="0" stop-color="#dbe7ff"/>
              <stop offset="1" stop-color="#f4f8ff"/>
            </linearGradient>

            <linearGradient id="icing" x1="0" x2="0" y1="0" y2="1">
              <stop offset="0" stop-color="#ffffff"/>
              <stop offset="1" stop-color="#eef2ff"/>
            </linearGradient>

            <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
              <feDropShadow dx="0" dy="10" stdDeviation="12" flood-color="rgba(0,0,0,0.16)"/>
            </filter>
          </defs>

          <!-- plate -->
          <ellipse cx="400" cy="470" rx="280" ry="40" fill="rgba(0,0,0,0.055)"/>
          <ellipse cx="400" cy="458" rx="300" ry="52" fill="rgba(31,79,216,0.08)"/>

          <!-- cake body -->
          <g filter="url(#softShadow)">
            <rect x="170" y="200" width="460" height="240" rx="40" fill="url(#cakeSide)" />
            <rect x="170" y="185" width="460" height="70" rx="35" fill="url(#cakeTop)" />
            <path d="M205 215
                     C230 265, 265 235, 290 265
                     C315 295, 350 245, 375 275
                     C400 305, 440 250, 470 285
                     C500 320, 540 255, 565 295
                     C590 330, 615 275, 635 255
                     L630 185 L205 185 Z"
                  fill="url(#icing)" opacity="0.98"/>
          </g>

          <!-- ribbon accent -->
          <rect x="170" y="310" width="460" height="44" rx="20" fill="rgba(124, 140, 255, 0.22)"/>
          <rect x="170" y="320" width="460" height="24" rx="12" fill="rgba(124, 140, 255, 0.30)"/>

          <!-- candles -->
          <g>
            <!-- Left candle -->
            <rect x="290" y="120" width="26" height="90" rx="10" fill="#f8faff"/>
            <rect x="290" y="160" width="26" height="10" rx="5" fill="rgba(31,79,216,0.12)"/>
            <rect x="301" y="110" width="4" height="18" rx="2" fill="rgba(0,0,0,0.25)"/>
            <g transform="translate(303,102)">
              <g class="flameShape f1">
                <path d="M0,28 C-10,18 -6,6 0,0 C6,6 10,18 0,28 Z" fill="#ffb703"/>
                <path d="M0,24 C-6,17 -3,8 0,4 C3,8 6,17 0,24 Z" fill="#ff6b00" opacity="0.9"/>
              </g>
            </g>

            <!-- Middle candle -->
            <rect x="387" y="105" width="26" height="105" rx="10" fill="#f8faff"/>
            <rect x="387" y="145" width="26" height="10" rx="5" fill="rgba(31,79,216,0.12)"/>
            <rect x="398" y="95" width="4" height="20" rx="2" fill="rgba(0,0,0,0.25)"/>
            <g transform="translate(400,86)">
              <g class="flameShape f2">
                <path d="M0,30 C-11,20 -7,7 0,0 C7,7 11,20 0,30 Z" fill="#ffb703"/>
                <path d="M0,26 C-7,18 -4,9 0,4 C4,9 7,18 0,26 Z" fill="#ff6b00" opacity="0.9"/>
              </g>
            </g>

            <!-- Right candle -->
            <rect x="484" y="120" width="26" height="90" rx="10" fill="#f8faff"/>
            <rect x="484" y="160" width="26" height="10" rx="5" fill="rgba(31,79,216,0.12)"/>
            <rect x="495" y="110" width="4" height="18" rx="2" fill="rgba(0,0,0,0.25)"/>
            <g transform="translate(497,102)">
              <g class="flameShape f3">
                <path d="M0,28 C-10,18 -6,6 0,0 C6,6 10,18 0,28 Z" fill="#ffb703"/>
                <path d="M0,24 C-6,17 -3,8 0,4 C3,8 6,17 0,24 Z" fill="#ff6b00" opacity="0.9"/>
              </g>
            </g>
          </g>

          <!-- sprinkles -->
          <g opacity="0.55">
            <circle cx="250" cy="250" r="5" fill="rgba(31,79,216,0.20)"/>
            <circle cx="320" cy="235" r="4" fill="rgba(124, 140, 255,0.22)"/>
            <circle cx="510" cy="240" r="4" fill="rgba(255,107,0,0.20)"/>
            <circle cx="560" cy="270" r="5" fill="rgba(0,200,140,0.18)"/>
            <circle cx="410" cy="240" r="5" fill="rgba(255,183,3,0.18)"/>
          </g>
        </svg>
      </div>
    </div>
  </div>

  <script>
    // Confetti (balanced palette) — unchanged working version
    const canvas = document.getElementById('confetti');
    const ctx = canvas.getContext('2d');

    function resize(){
      const dpr = Math.max(1, window.devicePixelRatio || 1);
      canvas.width = Math.floor(window.innerWidth * dpr);
      canvas.height = Math.floor(window.innerHeight * dpr);
      canvas.style.width = window.innerWidth + 'px';
      canvas.style.height = window.innerHeight + 'px';
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }
    window.addEventListener('resize', resize);
    resize();

    function rand(min, max){ return Math.random() * (max - min) + min; }
    function pick(arr){ return arr[(Math.random() * arr.length) | 0]; }

    const palette = [
      'rgba(31, 79, 216, 0.22)',   // blue
      'rgba(124, 140, 255, 0.22)', // lavender
      'rgba(0, 163, 255, 0.20)',   // sky
      'rgba(0, 200, 140, 0.20)',   // green
      'rgba(255, 183, 3, 0.24)',   // gold
      'rgba(255, 107, 0, 0.22)',   // orange
      'rgba(120, 120, 140, 0.16)'  // neutral
    ];

    const confetti = [];
    const COUNT = 130;

    function makePiece(){
      const size = rand(6, 14);
      return {
        x: rand(0, window.innerWidth),
        y: rand(-window.innerHeight, 0),
        w: size,
        h: rand(8, 18),
        vy: rand(1.2, 3.0),
        vx: rand(-0.7, 0.7),
        rot: rand(0, Math.PI * 2),
        vr: rand(-0.08, 0.08),
        color: pick(palette),
        shape: Math.random() < 0.25 ? 'circle' : 'rect',
        drift: rand(-0.9, 0.9),
        wobble: rand(0, Math.PI * 2),
        wobbleSpeed: rand(0.01, 0.03)
      };
    }
    for (let i=0; i<COUNT; i++) confetti.push(makePiece());

    function drawPiece(p){
      ctx.save();
      ctx.translate(p.x, p.y);
      ctx.rotate(p.rot);
      ctx.fillStyle = p.color;
      if (p.shape === 'circle'){
        ctx.beginPath();
        ctx.arc(0, 0, p.w * 0.42, 0, Math.PI * 2);
        ctx.fill();
      } else {
        ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
      }
      ctx.restore();
    }

    let last = performance.now();
    function tick(now){
      const dt = Math.min(32, now - last);
      last = now;

      ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);

      for (const p of confetti){
        p.wobble += p.wobbleSpeed * (dt / 16);
        const wob = Math.sin(p.wobble) * 0.8;

        p.y += p.vy * (dt / 16);
        p.x += (p.vx + wob * p.drift) * (dt / 16);
        p.rot += p.vr * (dt / 16);

        if (p.y > window.innerHeight + 40){
          p.y = rand(-120, -40);
          p.x = rand(0, window.innerWidth);
        }
        if (p.x < -60) p.x = window.innerWidth + 60;
        if (p.x > window.innerWidth + 60) p.x = -60;

        drawPiece(p);
      }

      requestAnimationFrame(tick);
    }
    requestAnimationFrame(tick);

    // gentle random drift for flames (no transform conflicts)
    (function flameDrift(){
      const flames = document.querySelectorAll('.flameShape');
      setInterval(() => {
        flames.forEach((f) => {
          f.style.setProperty('--tx', (Math.random() * 2 - 1).toFixed(2) + 'px');
        });
      }, 150);
    })();

    // Balloons (SVG), more frequent (3–6s), no fade at top
    const balloonLayer = document.getElementById('balloonLayer');

    function balloonSVG(fill1, fill2){
      const gid = 'g' + Math.random().toString(36).slice(2);
      return `
        <svg viewBox="0 0 120 190" width="92" height="125" aria-hidden="true">
          <defs>
            <linearGradient id="${gid}" x1="0" x2="0" y1="0" y2="1">
              <stop offset="0" stop-color="${fill1}"/>
              <stop offset="1" stop-color="${fill2}"/>
            </linearGradient>
          </defs>

          <!-- balloon -->
          <path d="M60 14
                   C28 14 12 40 12 68
                   C12 114 46 140 60 152
                   C74 140 108 114 108 68
                   C108 40 92 14 60 14 Z"
                fill="url(#${gid})"/>

          <!-- highlight -->
          <path d="M40 34
                   C28 46 25 62 29 78
                   C33 66 44 52 56 44
                   C52 40 46 36 40 34 Z"
                fill="rgba(255,255,255,0.33)"/>

          <!-- knot -->
          <path d="M60 152
                   C56 158 56 162 60 168
                   C64 162 64 158 60 152 Z"
                fill="rgba(0,0,0,0.18)"/>

          <!-- string -->
          <path d="M60 168
                   C58 176 52 182 46 186"
                fill="none" stroke="rgba(0,0,0,0.22)" stroke-width="2" stroke-linecap="round"/>
        </svg>
      `;
    }

    const balloonColors = [
      ["#2a63ff", "#1842b7"],
      ["#7c8cff", "#555fda"],
      ["#00a3ff", "#0076c2"],
      ["#00c88c", "#008a62"],
      ["#ffb703", "#d98100"],
      ["#ff6b00", "#c85400"]
    ];

    function spawnBalloon(){
      const el = document.createElement('div');
      el.className = 'balloon';

      const [c1, c2] = pick(balloonColors);
      el.innerHTML = balloonSVG(c1, c2);

      // random across bottom
      el.style.left = rand(4, 96) + 'vw';

      // drift and duration
      const drift = rand(-140, 140); // px
      const dur = rand(7.0, 10.0);   // seconds
      el.style.setProperty('--drift', drift.toFixed(0) + 'px');
      el.style.setProperty('--dur', dur.toFixed(2) + 's');

      // rotation variety
      el.style.setProperty('--r0', rand(-6, -1).toFixed(1) + 'deg');
      el.style.setProperty('--r1', rand(2, 7).toFixed(1) + 'deg');
      el.style.setProperty('--r2', rand(-5, 3).toFixed(1) + 'deg');

      // size variation
      el.style.transform = `scale(${rand(0.88, 1.15).toFixed(2)})`;

      balloonLayer.appendChild(el);

      // cleanup after animation completes
      setTimeout(() => el.remove(), (dur + 0.6) * 1000);
    }



    function scheduleBalloon(){
      const next = rand(2000, 4000); // MORE balloons: every 2–4 seconds
      setTimeout(() => {
       spawnBalloon();

    // 40% chance of a second balloon at the same time
       if (Math.random() < 0.4) {
       setTimeout(spawnBalloon, rand(200, 600));
     }

    scheduleBalloon();
  }, next);
}


    setTimeout(scheduleBalloon, 1800);
  </script>
</body>
</html>
